<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hyjj.hyjjservice.dao.ReportTemplateMapper">
  <resultMap id="BaseResultMap" type="com.hyjj.hyjjservice.dataobject.ReportTemplate">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="type" jdbcType="INTEGER" property="type" />
    <result column="title" jdbcType="VARCHAR" property="title" />
    <result column="number" jdbcType="VARCHAR" property="number" />
    <result column="made_rep_org" jdbcType="VARCHAR" property="madeRepOrg" />
    <result column="auditing_org" jdbcType="VARCHAR" property="auditingOrg" />
    <result column="auditing_code" jdbcType="VARCHAR" property="auditingCode" />
    <result column="expire_date" jdbcType="DATE" property="expireDate" />
    <result column="remark" jdbcType="VARCHAR" property="remark" />
    <result column="insert_date" jdbcType="TIMESTAMP" property="insertDate" />
    <result column="rep_class" jdbcType="TINYINT" property="repClass" />
    <result column="head_html" jdbcType="VARCHAR" property="headHtml" />
    <result column="body_html" jdbcType="VARCHAR" property="bodyHtml" />
    <result column="tail_html" jdbcType="VARCHAR" property="tailHtml" />
    <result column="template_path" jdbcType="VARCHAR" property="templatePath" />
    <result column="row_index" jdbcType="INTEGER" property="rowIndex" />
    <result column="var_row_flag" jdbcType="VARCHAR" property="varRowFlag" />
    <result column="show_order" jdbcType="INTEGER" property="showOrder" />
    <result column="gmt_create" jdbcType="TIMESTAMP" property="gmtCreate" />
    <result column="gmt_modified" jdbcType="TIMESTAMP" property="gmtModified" />
  </resultMap>

  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    id, type, title, number, made_rep_org, auditing_org, auditing_code, expire_date, 
    remark, insert_date, rep_class, head_html, body_html, tail_html, template_path, row_index, 
    var_row_flag, show_order, gmt_create, gmt_modified
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    select 
    <include refid="Base_Column_List" />
    from report_template
    where id = #{id,jdbcType=BIGINT}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    delete from report_template
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.hyjj.hyjjservice.dataobject.ReportTemplate">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    insert into report_template (id, type, title, 
      number, made_rep_org, auditing_org, 
      auditing_code, expire_date, remark, 
      insert_date, rep_class, head_html, 
      body_html, tail_html, template_path, 
      row_index, var_row_flag, show_order, 
      gmt_create, gmt_modified)
    values (#{id,jdbcType=BIGINT}, #{type,jdbcType=INTEGER}, #{title,jdbcType=VARCHAR}, 
      #{number,jdbcType=VARCHAR}, #{madeRepOrg,jdbcType=VARCHAR}, #{auditingOrg,jdbcType=VARCHAR}, 
      #{auditingCode,jdbcType=VARCHAR}, #{expireDate,jdbcType=DATE}, #{remark,jdbcType=VARCHAR}, 
      #{insertDate,jdbcType=TIMESTAMP}, #{repClass,jdbcType=TINYINT}, #{headHtml,jdbcType=VARCHAR}, 
      #{bodyHtml,jdbcType=VARCHAR}, #{tailHtml,jdbcType=VARCHAR}, #{templatePath,jdbcType=VARCHAR}, 
      #{rowIndex,jdbcType=INTEGER}, #{varRowFlag,jdbcType=VARCHAR}, #{showOrder,jdbcType=INTEGER}, 
      #{gmtCreate,jdbcType=TIMESTAMP}, #{gmtModified,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.hyjj.hyjjservice.dataobject.ReportTemplate">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    insert into report_template
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="type != null">
        type,
      </if>
      <if test="title != null">
        title,
      </if>
      <if test="number != null">
        number,
      </if>
      <if test="madeRepOrg != null">
        made_rep_org,
      </if>
      <if test="auditingOrg != null">
        auditing_org,
      </if>
      <if test="auditingCode != null">
        auditing_code,
      </if>
      <if test="expireDate != null">
        expire_date,
      </if>
      <if test="remark != null">
        remark,
      </if>
      <if test="insertDate != null">
        insert_date,
      </if>
      <if test="repClass != null">
        rep_class,
      </if>
      <if test="headHtml != null">
        head_html,
      </if>
      <if test="bodyHtml != null">
        body_html,
      </if>
      <if test="tailHtml != null">
        tail_html,
      </if>
      <if test="templatePath != null">
        template_path,
      </if>
      <if test="rowIndex != null">
        row_index,
      </if>
      <if test="varRowFlag != null">
        var_row_flag,
      </if>
      <if test="showOrder != null">
        show_order,
      </if>
      <if test="gmtCreate != null">
        gmt_create,
      </if>
      <if test="gmtModified != null">
        gmt_modified,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="type != null">
        #{type,jdbcType=INTEGER},
      </if>
      <if test="title != null">
        #{title,jdbcType=VARCHAR},
      </if>
      <if test="number != null">
        #{number,jdbcType=VARCHAR},
      </if>
      <if test="madeRepOrg != null">
        #{madeRepOrg,jdbcType=VARCHAR},
      </if>
      <if test="auditingOrg != null">
        #{auditingOrg,jdbcType=VARCHAR},
      </if>
      <if test="auditingCode != null">
        #{auditingCode,jdbcType=VARCHAR},
      </if>
      <if test="expireDate != null">
        #{expireDate,jdbcType=DATE},
      </if>
      <if test="remark != null">
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="insertDate != null">
        #{insertDate,jdbcType=TIMESTAMP},
      </if>
      <if test="repClass != null">
        #{repClass,jdbcType=TINYINT},
      </if>
      <if test="headHtml != null">
        #{headHtml,jdbcType=VARCHAR},
      </if>
      <if test="bodyHtml != null">
        #{bodyHtml,jdbcType=VARCHAR},
      </if>
      <if test="tailHtml != null">
        #{tailHtml,jdbcType=VARCHAR},
      </if>
      <if test="templatePath != null">
        #{templatePath,jdbcType=VARCHAR},
      </if>
      <if test="rowIndex != null">
        #{rowIndex,jdbcType=INTEGER},
      </if>
      <if test="varRowFlag != null">
        #{varRowFlag,jdbcType=VARCHAR},
      </if>
      <if test="showOrder != null">
        #{showOrder,jdbcType=INTEGER},
      </if>
      <if test="gmtCreate != null">
        #{gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtModified != null">
        #{gmtModified,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.hyjj.hyjjservice.dataobject.ReportTemplate">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    update report_template
    <set>
      <if test="type != null">
        type = #{type,jdbcType=INTEGER},
      </if>
      <if test="title != null">
        title = #{title,jdbcType=VARCHAR},
      </if>
      <if test="number != null">
        number = #{number,jdbcType=VARCHAR},
      </if>
      <if test="madeRepOrg != null">
        made_rep_org = #{madeRepOrg,jdbcType=VARCHAR},
      </if>
      <if test="auditingOrg != null">
        auditing_org = #{auditingOrg,jdbcType=VARCHAR},
      </if>
      <if test="auditingCode != null">
        auditing_code = #{auditingCode,jdbcType=VARCHAR},
      </if>
      <if test="expireDate != null">
        expire_date = #{expireDate,jdbcType=DATE},
      </if>
      <if test="remark != null">
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="insertDate != null">
        insert_date = #{insertDate,jdbcType=TIMESTAMP},
      </if>
      <if test="repClass != null">
        rep_class = #{repClass,jdbcType=TINYINT},
      </if>
      <if test="headHtml != null">
        head_html = #{headHtml,jdbcType=VARCHAR},
      </if>
      <if test="bodyHtml != null">
        body_html = #{bodyHtml,jdbcType=VARCHAR},
      </if>
      <if test="tailHtml != null">
        tail_html = #{tailHtml,jdbcType=VARCHAR},
      </if>
      <if test="templatePath != null">
        template_path = #{templatePath,jdbcType=VARCHAR},
      </if>
      <if test="rowIndex != null">
        row_index = #{rowIndex,jdbcType=INTEGER},
      </if>
      <if test="varRowFlag != null">
        var_row_flag = #{varRowFlag,jdbcType=VARCHAR},
      </if>
      <if test="showOrder != null">
        show_order = #{showOrder,jdbcType=INTEGER},
      </if>
      <if test="gmtCreate != null">
        gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
      </if>
      <if test="gmtModified != null">
        gmt_modified = #{gmtModified,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.hyjj.hyjjservice.dataobject.ReportTemplate">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sat Jan 09 22:49:25 CST 2021.
    -->
    update report_template
    set type = #{type,jdbcType=INTEGER},
      title = #{title,jdbcType=VARCHAR},
      number = #{number,jdbcType=VARCHAR},
      made_rep_org = #{madeRepOrg,jdbcType=VARCHAR},
      auditing_org = #{auditingOrg,jdbcType=VARCHAR},
      auditing_code = #{auditingCode,jdbcType=VARCHAR},
      expire_date = #{expireDate,jdbcType=DATE},
      remark = #{remark,jdbcType=VARCHAR},
      insert_date = #{insertDate,jdbcType=TIMESTAMP},
      rep_class = #{repClass,jdbcType=TINYINT},
      head_html = #{headHtml,jdbcType=VARCHAR},
      body_html = #{bodyHtml,jdbcType=VARCHAR},
      tail_html = #{tailHtml,jdbcType=VARCHAR},
      template_path = #{templatePath,jdbcType=VARCHAR},
      row_index = #{rowIndex,jdbcType=INTEGER},
      var_row_flag = #{varRowFlag,jdbcType=VARCHAR},
      show_order = #{showOrder,jdbcType=INTEGER},
      gmt_create = #{gmtCreate,jdbcType=TIMESTAMP},
      gmt_modified = #{gmtModified,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=BIGINT}
  </update>


  <select id="getReportNumber" resultType="java.lang.String">
    SELECT report_template.`number`
    FROM report_template
    WHERE id IN
    <foreach collection="reportTemplateIds" item="reportTemplateId" open="(" close=")" separator=",">
      #{reportTemplateId}
    </foreach>
  </select>
  <select id="getReportTemplateList" resultType="com.hyjj.hyjjservice.controller.settings.viewObject.ReportTemplateVO" parameterType="com.hyjj.hyjjservice.controller.settings.viewObject.ReportTemplateVO">
    select rt.id,i.name,rt.rep_class,rt.title,rt.made_rep_org,rt.auditing_org,rt.auditing_code,rt.gmt_create from report_template rt inner join industry i on rt.type = i.id
    <where>
      1 = 1
      <if test="reportTemplateVO.title != null">
        and rt.title = #{reportTemplateVO.title}
      </if>
      <if test="reportTemplateVO.name != null">
        and i.name = #{reportTemplateVO.name}
      </if>
      <if test="reportTemplateVO.madeRepOrg != null">
        and rt.made_rep_org = #{reportTemplateVO.madeRepOrg}
      </if>
      <if test="reportTemplateVO.auditingOrg != null">
        and rt.auditing_org = #{reportTemplateVO.auditingOrg}
      </if>
      <if test="reportTemplateVO.auditingCode != null">
        and rt.auditing_code = #{reportTemplateVO.auditingCode}
      </if>
      <if test="reportTemplateVO.timeFrom != null and reportTemplateVO.timeTo != null">
        and rt.gmt_create between #{reportTemplateVO.timeFrom} and #{reportTemplateVO.timeTo}
      </if>
      <if test="reportTemplateVO.timeFrom != null and reportTemplateVO.timeTo == null">
        and rt.gmt_create &gt;= #{reportTemplateVO.timeFrom}
      </if>
      <if test="reportTemplateVO.timeFrom == null and reportTemplateVO.timeTo != null">
        and rt.gmt_create &lt;= #{reportTemplateVO.timeTo}
      </if>
    </where>
  </select>
  <select id="getReportTemplateInfo" resultType="com.hyjj.hyjjservice.controller.settings.viewObject.ReportTemplateInfoVO">
    select i.name,rt.rep_class,rt.number,rt.made_rep_org,rt.auditing_org,rt.auditing_code,rt.expire_date,ci.com_name,rt.head_html,rt.body_html,rt.tail_html,rt.remark
    from (((report_template rt inner join industry i on rt.type = i.id)
    inner join com_fill_report cfr on rt.id = cfr.report_template_id)
    inner join cominfo ci on cfr.cominfo_id = ci.id)
    where rt.id = #{id}
  </select>
</mapper>